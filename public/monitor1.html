<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Monitor 1</title>

    <link rel="stylesheet" type="text/css" href="style_controller.css" />
    <script src="/libraries/p5.min.js"></script>
    <script src="/libraries/p5.sound.min.js"></script>

    <style>
      /* --- STARTSCREEN BASIC STYLE --- */
      .startscreen {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: var(--white);
        color: var(--black);
        flex-direction: column;
        font-family: "Suisse International", sans-serif;
        transition: opacity 0.6s ease;
        position: relative;
      }

      .startscreen.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .startscreen-content {
        text-align: center;
        max-width: 600px;
      }

      .startscreen h1 {
        font-weight: 700;
        font-size: 2rem;
        margin-bottom: 1.5rem;
        text-transform: uppercase;
      }

      .startscreen p {
        font-size: 1rem;
        margin: 1rem 0 2rem;
        color: var(--grey);
      }

      .button-group {
        display: flex;
        gap: 1rem;
        justify-content: center;
      }

      .button-group button {
        background: var(--blue);
        color: white;
        border: none;
        padding: 0.8rem 1.6rem;
        cursor: pointer;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.03em;
        transition: background 0.2s ease;
      }

      .button-group button:hover {
        background: #0f6ed0;
      }

      /* --- ABOUT SCREEN --- */
      #aboutscreen {
        display: none;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: var(--white);
        color: var(--black);
        flex-direction: column;
        font-family: "Suisse International", sans-serif;
        transition: opacity 0.6s ease;
        position: relative;
        text-align: center;
      }

      #aboutscreen.hidden {
        opacity: 0;
        pointer-events: none;
      }

      .back-button {
        position: absolute;
        top: 2rem;
        left: 50%;
        transform: translateX(-50%);
        background: var(--blue);
        color: white;
        border: none;
        padding: 0.6rem 1.4rem;
        cursor: pointer;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.03em;
        transition: background 0.2s ease;
      }

      .back-button:hover {
        background: #0f6ed0;
      }
    </style>
  </head>

  <body>
    <!-- STARTSCREEN -->
    <div id="startscreen" class="startscreen">
      <div class="startscreen-content">
        <h1>What is a sign of peace in your perspective?</h1>

        <!-- ✅ Reuse same panel -->
        <div id="panel" class="panel"></div>

        <p>
          Discover how people in Mostar describe peace in their everyday lives.
          Type a word and explore what “peace” means to the people of Mostar.
        </p>

        <div class="button-group">
          <button id="startBtn">Start</button>
          <button id="aboutBtn">About</button>
        </div>
      </div>
    </div>

    <!-- ✅ ABOUT SCREEN -->
    <div id="aboutscreen" class="startscreen hidden">
      <button id="backBtn" class="back-button">← Back</button>
      <div class="startscreen-content">
        <h1>About this Project</h1>
        <p>
          This prototype explores how people describe <strong>peace</strong> in
          everyday life. It visualizes words and meanings gathered from voices
          in <strong>Mostar</strong>.
        </p>
        <p>Design: <em>Swiss Style — Precision meets Clarity</em>.</p>
      </div>
    </div>

    <!--  MAIN APP -->
    <div id="mainApp" style="display: none">
      <div id="topbar">
        <div id="panelMain"></div>
        <div id="hamburger">&#9776;</div>
        <div id="filterMenu" class="hidden">
          <label><input type="checkbox" value="youth" checked /> Youth</label>
          <label><input type="checkbox" value="men" checked /> Men</label>
          <label><input type="checkbox" value="women" checked /> Women</label>
        </div>
      </div>

      <div id="canvasContainer"></div>
      <div id="detailsContainer">
        <div id="detailsContent"></div>
      </div>
      <div id="contentContainer">Content</div>
    </div>

    <!-- ✅ SOCKET.IO -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
      window.socket = io();
      window.socket.emit("join", "monitor1");
    </script>

    <!-- ✅ LOGIC -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const startScreen = document.getElementById("startscreen");
        const aboutScreen = document.getElementById("aboutscreen");
        const mainApp = document.getElementById("mainApp");
        const startBtn = document.getElementById("startBtn");
        const aboutBtn = document.getElementById("aboutBtn");
        const backBtn = document.getElementById("backBtn");
        const panelMain = document.getElementById("panelMain");
        const panel = document.getElementById("panel");

        // Start button logic
        startBtn.addEventListener("click", () => {
          startScreen.classList.add("hidden");

          setTimeout(() => {
            startScreen.style.display = "none";
            mainApp.style.display = "block";

            // Move panel to main app
            panelMain.appendChild(panel);

            const input = panel.querySelector("input");
            const query = input?.value?.trim();
            if (query && window.socket) {
              window.socket.emit("control", {
                targetRoom: "visual",
                payload: { action: "searchQuery", query },
              });
            }

            window.initialSearch = query || "";
          }, 600);
        });

        // About button logic
        aboutBtn.addEventListener("click", () => {
          startScreen.classList.add("hidden");

          setTimeout(() => {
            startScreen.style.display = "none";
            aboutScreen.classList.remove("hidden");
            aboutScreen.style.display = "flex";
          }, 600);
        });

        // Back button logic
        backBtn.addEventListener("click", () => {
          aboutScreen.classList.add("hidden");

          setTimeout(() => {
            aboutScreen.style.display = "none";
            startScreen.classList.remove("hidden");
            startScreen.style.display = "flex";
          }, 600);
        });
      });
    </script>

    <!-- ✅ MAIN SKETCH -->
    <script src="/Petra/sketch_controller.js"></script>
  </body>
</html>
